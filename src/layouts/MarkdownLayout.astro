---
import BaseLayout from './BaseLayout.astro';

const { frontmatter } = Astro.props;
const {
    title,
    description,
    pubDate,
    author,
    tags = [],
    category,
} = frontmatter;

const formattedDate = pubDate
    ? new Intl.DateTimeFormat('zh-CN', { dateStyle: 'long' }).format(new Date(pubDate))
    : undefined;
---

<BaseLayout
    title={`${title} | M1saK1 Blog`}
    description={description}
    bodyClass='bg-transparent'
>
    <section class='relative z-10 mx-auto w-full max-w-5xl px-6 pb-24 pt-28'>
        <div class='relative overflow-hidden rounded-3xl border border-white/40 bg-white/80 shadow-2xl backdrop-blur-xl dark:border-slate-700/60 dark:bg-slate-900/75'>
            <div class='pointer-events-none absolute inset-x-10 top-0 h-32 rounded-full bg-gradient-to-r from-pink-500/40 via-purple-500/30 to-sky-500/40 blur-3xl'></div>
            <article class='relative px-8 pb-12 pt-14 text-slate-800 dark:text-slate-100'>
                <header class='mb-12 text-center'>
                    {category && <p class='text-xs font-semibold uppercase tracking-[0.35em] text-slate-500 dark:text-slate-400'>{category}</p>}
                    <h1 class='mt-3 text-4xl font-semibold tracking-tight text-slate-900 dark:text-white'>{title}</h1>
                    {description && <p class='mt-4 text-base text-slate-600 dark:text-slate-300'>{description}</p>}
                    <div class='mt-6 flex flex-wrap justify-center gap-x-6 gap-y-3 text-sm text-slate-500 dark:text-slate-400'>
                        {author && <span>作者：{author}</span>}
                        {formattedDate && <time datetime={pubDate}>{formattedDate}</time>}
                    </div>
                    {tags.length > 0 && (
                        <ul class='mt-6 flex flex-wrap justify-center gap-2'>
                            {tags.map((tag:string) => (
                                <li class='rounded-full border border-slate-200/70 px-3 py-1 text-xs font-medium uppercase tracking-wide text-slate-600 dark:border-slate-700 dark:text-slate-300'>
                                    {tag}
                                </li>
                            ))}
                        </ul>
                    )}
                </header>
                <div class='article-content mx-auto max-w-3xl space-y-6 text-[17px] leading-relaxed text-slate-700 dark:text-slate-200'>
                    <slot />
                </div>
            </article>
        </div>
    </section>
</BaseLayout>

<style>
    .article-content :global(h1) {
        display: none;
    }

    .article-content :global(h2) {
        font-size: 1.6rem;
        font-weight: 600;
        margin-top: 2.5rem;
        margin-bottom: 1rem;
        color: rgb(30 41 59);
    }

    .article-content :global(h3) {
        font-size: 1.3rem;
        font-weight: 600;
        margin-top: 2rem;
        margin-bottom: 0.75rem;
        color: rgb(30 41 59);
    }

    .article-content :global(p) {
        margin: 1rem 0;
    }

    .article-content :global(ul),
    .article-content :global(ol) {
        padding-left: 1.5rem;
        margin: 1.25rem 0;
        list-style-position: outside;
    }

    .article-content :global(li) {
        margin-bottom: 0.5rem;
    }

    .article-content :global(blockquote) {
        border-left: 4px solid rgba(148, 163, 184, 0.6);
        padding-left: 1rem;
        font-style: italic;
        color: rgb(71 85 105);
        margin: 1.5rem 0;
    }

    .article-content :global(code) {
        background-color: rgba(15, 23, 42, 0.08);
        border-radius: 0.375rem;
        padding: 0.25rem 0.4rem;
        font-size: 0.95em;
    }

    .article-content :global(pre) {
        background: linear-gradient(135deg, rgba(15, 23, 42, 0.92), rgba(30, 64, 175, 0.88));
        color: rgb(226, 232, 240);
        border-radius: 0.875rem;
        padding: 1.25rem 1.5rem;
        overflow-x: auto;
        margin: 2rem 0;
    }

    .article-content :global(a) {
        color: rgb(79, 70, 229);
        text-decoration: underline;
        text-decoration-color: rgba(79, 70, 229, 0.4);
        transition: color 150ms ease, text-decoration-color 150ms ease;
    }

    .article-content :global(a:hover) {
        color: rgb(37, 99, 235);
        text-decoration-color: rgba(37, 99, 235, 0.6);
    }

    @media (prefers-color-scheme: dark) {
        .article-content :global(h2),
        .article-content :global(h3) {
            color: rgb(226, 232, 240);
        }

        .article-content :global(blockquote) {
            border-color: rgba(148, 163, 184, 0.45);
            color: rgba(203, 213, 225, 0.85);
        }

        .article-content :global(code) {
            background-color: rgba(148, 163, 184, 0.15);
        }
        .article-content :global(a) {
            color: rgb(129, 140, 248);
        }

        .article-content :global(a:hover) {
            color: rgb(165, 180, 252);
        }
     }
</style>
